# MediaCrawler æ–‡æœ¬åˆ†æä½¿ç”¨æ•™ç¨‹

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [è¯¦ç»†ä½¿ç”¨æŒ‡å—](#è¯¦ç»†ä½¿ç”¨æŒ‡å—)
5. [æ¨èåˆ†ææµç¨‹](#æ¨èåˆ†ææµç¨‹)
6. [å‚æ•°è¯´æ˜](#å‚æ•°è¯´æ˜)
7. [è¾“å‡ºæ–‡ä»¶è¯´æ˜](#è¾“å‡ºæ–‡ä»¶è¯´æ˜)
8. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
9. [é«˜çº§ç”¨æ³•](#é«˜çº§ç”¨æ³•)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

MediaCrawler æ–‡æœ¬åˆ†ææ¨¡å—æ˜¯ä¸€ä¸ªä¸“æ³¨äºä»ä¼—å¿ƒç†åˆ†æçš„ç»¼åˆæ€§å·¥å…·é›†ï¼Œæä¾›ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- **æ•°æ®æ¸…æ´—**ï¼šè¿‡æ»¤åƒåœ¾è¯„è®ºï¼Œæ¸…æ´—æ–‡æœ¬æ•°æ®
- **æƒ…æ„Ÿåˆ†æ**ï¼šæ”¯æŒæœ¬åœ°è¯å…¸å’Œé˜¿é‡Œäº‘APIä¸¤ç§æ–¹å¼
- **æ—¶é—´åˆ†æ**ï¼šåˆ†æè¯„è®ºæ—¶é—´åˆ†å¸ƒï¼Œè¯†åˆ«ä»ä¼—å¿ƒç†æ—¶é—´çª—å£
- **ç‚¹èµåˆ†æ**ï¼šåˆ†æç‚¹èµäº’åŠ¨æ¨¡å¼ï¼Œè¯†åˆ«æ„è§é¢†è¢–å’Œç¤¾ä¼šè®¤åŒä¿¡å·

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

### 1. Pythonç¯å¢ƒ

ç¡®ä¿å·²å®‰è£…Python 3.7+ï¼Œæ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼š

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt

# æˆ–ä½¿ç”¨uvï¼ˆæ¨èï¼‰
uv sync
```

### 3. æ•°æ®åº“é…ç½®

ç¡®ä¿MySQLæ•°æ®åº“å·²é…ç½®ï¼Œå¹¶åœ¨`config/db_config.py`ä¸­æ­£ç¡®è®¾ç½®è¿æ¥å‚æ•°ã€‚

### 4. é˜¿é‡Œäº‘APIé…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€ä½¿ç”¨é˜¿é‡Œäº‘æƒ…æ„Ÿåˆ†æAPIï¼Œè¯·é…ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# åˆ›å»º.envæ–‡ä»¶
cp text_analysis/env.example text_analysis/.env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œæ·»åŠ é˜¿é‡Œäº‘APIå¯†é’¥
ALIYUN_ACCESS_KEY_ID=your_access_key_id
ALIYUN_ACCESS_KEY_SECRET=your_access_key_secret
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç»Ÿä¸€å…¥å£å·¥å…·

é¡¹ç›®æä¾›äº†ç»Ÿä¸€çš„å‘½ä»¤è¡Œå·¥å…·`text_analysis_unified.py`ï¼Œæ”¯æŒæ‰€æœ‰åˆ†ææ¨¡å—ï¼š

```bash
# æŸ¥çœ‹å¸®åŠ©
python text_analysis_unified.py --help

# æŸ¥çœ‹å„æ¨¡å—å¸®åŠ©
python text_analysis_unified.py cleaning --help
python text_analysis_unified.py sentiment --help
python text_analysis_unified.py time --help
python text_analysis_unified.py like --help
```

## ğŸ“– è¯¦ç»†ä½¿ç”¨æŒ‡å—

### 1. æ•°æ®æ¸…æ´—æ¨¡å—

æ•°æ®æ¸…æ´—æ˜¯åˆ†ææµç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œç”¨äºè¿‡æ»¤åƒåœ¾è¯„è®ºå’Œæ¸…æ´—æ–‡æœ¬æ•°æ®ã€‚

#### åŸºæœ¬ç”¨æ³•

```bash
# æ¸…æ´—æ‰€æœ‰æ•°æ®
python text_analysis_unified.py cleaning

# æ¸…æ´—æŒ‡å®šè§†é¢‘çš„è¯„è®º
python text_analysis_unified.py cleaning --video-id 123456

# æµ‹è¯•æ¨¡å¼ï¼ˆåªå¤„ç†å°‘é‡æ•°æ®ï¼‰
python text_analysis_unified.py cleaning --test

# é™åˆ¶å¤„ç†æ•°é‡
python text_analysis_unified.py cleaning --limit 1000
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--video-id` | str | None | æŒ‡å®šè§†é¢‘IDï¼Œä¸æŒ‡å®šåˆ™å¤„ç†æ‰€æœ‰æ•°æ® |
| `--limit` | int | None | é™åˆ¶å¤„ç†æ•°é‡ |
| `--test` | flag | False | æµ‹è¯•æ¨¡å¼ï¼Œåªå¤„ç†10æ¡æ•°æ® |
| `--no-save` | flag | False | ä¸ä¿å­˜ç»“æœæ–‡ä»¶ |
| `--no-report` | flag | False | ä¸ç”Ÿæˆåˆ†ææŠ¥å‘Š |
| `--no-viz` | flag | False | ä¸åˆ›å»ºå¯è§†åŒ–å›¾è¡¨ |

### 2. æƒ…æ„Ÿåˆ†ææ¨¡å—

æ”¯æŒæœ¬åœ°è¯å…¸å’Œé˜¿é‡Œäº‘APIä¸¤ç§åˆ†ææ–¹å¼ã€‚

#### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨æœ¬åœ°è¯å…¸åˆ†æï¼ˆæ¨èç”¨äºæµ‹è¯•ï¼‰
python text_analysis_unified.py sentiment --use-cleaned-data --type local --test

# ä½¿ç”¨é˜¿é‡Œäº‘APIåˆ†æï¼ˆæ¨èç”¨äºç”Ÿäº§ï¼‰
python text_analysis_unified.py sentiment --use-cleaned-data --type aliyun --test

# åˆ†ææŒ‡å®šè§†é¢‘çš„æ‰€æœ‰è¯„è®º
python text_analysis_unified.py sentiment --use-cleaned-data --type local --video-id 123456

# é™åˆ¶åˆ†ææ•°é‡
python text_analysis_unified.py sentiment --use-cleaned-data --type local --limit 500
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--use-cleaned-data` | flag | False | ä½¿ç”¨æ¸…æ´—åçš„æ•°æ®æ–‡ä»¶ï¼ˆæ¨èï¼‰ |
| `--type` | choice | local | åˆ†æå™¨ç±»å‹ï¼šlocal(æœ¬åœ°è¯å…¸) æˆ– aliyun(é˜¿é‡Œäº‘API) |
| `--video-id` | str | None | æŒ‡å®šè§†é¢‘IDï¼Œä¸æŒ‡å®šåˆ™åˆ†ææ‰€æœ‰è¯„è®º |
| `--limit` | int | None | é™åˆ¶åˆ†ææ•°é‡ |
| `--cleaned-data-path` | str | None | æŒ‡å®šæ¸…æ´—æ•°æ®æ–‡ä»¶è·¯å¾„ |
| `--test` | flag | False | æµ‹è¯•æ¨¡å¼ï¼Œåªåˆ†æ10æ¡æ•°æ® |

#### åˆ†æå™¨å¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°è¯å…¸ | é˜¿é‡Œäº‘API |
|------|----------|-----------|
| å‡†ç¡®åº¦ | ä¸­ç­‰ | é«˜ |
| é€Ÿåº¦ | å¿« | ä¸­ç­‰ |
| ç½‘ç»œä¾èµ– | æ—  | éœ€è¦ |
| æˆæœ¬ | å…è´¹ | æŒ‰é‡è®¡è´¹ |
| é€‚ç”¨åœºæ™¯ | æµ‹è¯•ã€ç¦»çº¿ | ç”Ÿäº§ç¯å¢ƒ |

### 3. æ—¶é—´åˆ†ææ¨¡å—

åˆ†æè¯„è®ºæ—¶é—´åˆ†å¸ƒï¼Œè¯†åˆ«ä»ä¼—å¿ƒç†æ—¶é—´çª—å£ã€‚

#### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨æ¸…æ´—æ•°æ®è¿›è¡Œåˆ†æ
python text_analysis_unified.py time --use-cleaned-data --test

# åˆ†ææŒ‡å®šè§†é¢‘
python text_analysis_unified.py time --use-cleaned-data --video-id 123456

# é™åˆ¶åˆ†ææ•°é‡
python text_analysis_unified.py time --use-cleaned-data --limit 1000
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--use-cleaned-data` | flag | False | ä½¿ç”¨æ¸…æ´—åçš„æ•°æ®æ–‡ä»¶ï¼ˆæ¨èï¼‰ |
| `--video-id` | str | None | æŒ‡å®šè§†é¢‘IDï¼Œä¸æŒ‡å®šåˆ™åˆ†ææ‰€æœ‰æ•°æ® |
| `--limit` | int | None | é™åˆ¶åˆ†ææ•°é‡ |
| `--cleaned-data-path` | str | None | æŒ‡å®šæ¸…æ´—æ•°æ®æ–‡ä»¶è·¯å¾„ |
| `--test` | flag | False | æµ‹è¯•æ¨¡å¼ï¼Œåªåˆ†æ10æ¡æ•°æ® |

### 4. ç‚¹èµåˆ†ææ¨¡å—

åˆ†æç‚¹èµäº’åŠ¨æ¨¡å¼ï¼Œè¯†åˆ«æ„è§é¢†è¢–å’Œç¤¾ä¼šè®¤åŒä¿¡å·ã€‚

#### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨æ¸…æ´—æ•°æ®è¿›è¡Œåˆ†æ
python text_analysis_unified.py like --use-cleaned-data --test

# åˆ†ææŒ‡å®šè§†é¢‘
python text_analysis_unified.py like --use-cleaned-data --video-id 123456

# é™åˆ¶åˆ†ææ•°é‡
python text_analysis_unified.py like --use-cleaned-data --limit 1000
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--use-cleaned-data` | flag | False | ä½¿ç”¨æ¸…æ´—åçš„æ•°æ®æ–‡ä»¶ï¼ˆæ¨èï¼‰ |
| `--video-id` | str | None | æŒ‡å®šè§†é¢‘IDï¼Œä¸æŒ‡å®šåˆ™åˆ†ææ‰€æœ‰æ•°æ® |
| `--limit` | int | None | é™åˆ¶åˆ†ææ•°é‡ |
| `--cleaned-data-path` | str | None | æŒ‡å®šæ¸…æ´—æ•°æ®æ–‡ä»¶è·¯å¾„ |
| `--test` | flag | False | æµ‹è¯•æ¨¡å¼ï¼Œåªåˆ†æ10æ¡æ•°æ® |

## ğŸ”„ æ¨èåˆ†ææµç¨‹

### å®Œæ•´åˆ†ææµç¨‹

1. **æ•°æ®æ¸…æ´—**ï¼ˆå¿…éœ€ï¼‰
   ```bash
   python text_analysis_unified.py cleaning --video-id 123456
   ```

2. **æ—¶é—´åˆ†æ**ï¼ˆæ¨èï¼‰
   ```bash
   python text_analysis_unified.py time --use-cleaned-data --video-id 123456
   ```

3. **ç‚¹èµåˆ†æ**ï¼ˆæ¨èï¼‰
   ```bash
   python text_analysis_unified.py like --use-cleaned-data --video-id 123456
   ```

4. **æƒ…æ„Ÿåˆ†æ**ï¼ˆæ¨èï¼‰
   ```bash
   # ä½¿ç”¨æœ¬åœ°è¯å…¸ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
   python text_analysis_unified.py sentiment --use-cleaned-data --type local --video-id 123456
   
   # ä½¿ç”¨é˜¿é‡Œäº‘APIï¼ˆé«˜ç²¾åº¦ï¼‰
   python text_analysis_unified.py sentiment --use-cleaned-data --type aliyun --video-id 123456
   ```

### æµ‹è¯•æµç¨‹

```bash
# 1. æµ‹è¯•æ•°æ®æ¸…æ´—
python text_analysis_unified.py cleaning --test

# 2. æµ‹è¯•æ—¶é—´åˆ†æ
python text_analysis_unified.py time --use-cleaned-data --test

# 3. æµ‹è¯•ç‚¹èµåˆ†æ
python text_analysis_unified.py like --use-cleaned-data --test

# 4. æµ‹è¯•æƒ…æ„Ÿåˆ†æ
python text_analysis_unified.py sentiment --use-cleaned-data --type local --test
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯´æ˜

æ‰€æœ‰åˆ†æç»“æœéƒ½ä¿å­˜åœ¨`MediaCrawler/data/`ç›®å½•ä¸‹ï¼ŒæŒ‰æ¨¡å—å’Œæ—¶é—´æˆ³ç»„ç»‡ï¼š

```
data/
â”œâ”€â”€ processed/                    # æ¸…æ´—åçš„æ•°æ®
â”‚   â””â”€â”€ cleaned_data_YYYYMMDD_HHMMSS.json
â”œâ”€â”€ results/                      # åˆ†æç»“æœ
â”‚   â”œâ”€â”€ cleaning_analysis_YYYYMMDD_HHMMSS.csv
â”‚   â”œâ”€â”€ cleaning_analysis_YYYYMMDD_HHMMSS.json
â”‚   â”œâ”€â”€ sentiment_analysis_YYYYMMDD_HHMMSS.csv
â”‚   â”œâ”€â”€ sentiment_analysis_YYYYMMDD_HHMMSS.json
â”‚   â”œâ”€â”€ time_analysis_YYYYMMDD_HHMMSS.csv
â”‚   â”œâ”€â”€ time_analysis_YYYYMMDD_HHMMSS.json
â”‚   â”œâ”€â”€ like_analysis_YYYYMMDD_HHMMSS.csv
â”‚   â””â”€â”€ like_analysis_YYYYMMDD_HHMMSS.json
â”œâ”€â”€ reports/                      # åˆ†ææŠ¥å‘Š
â”‚   â”œâ”€â”€ cleaning_analysis_report_YYYYMMDD_HHMMSS.json
â”‚   â”œâ”€â”€ sentiment_analysis_report_YYYYMMDD_HHMMSS.json
â”‚   â”œâ”€â”€ time_analysis_report_YYYYMMDD_HHMMSS.json
â”‚   â””â”€â”€ like_analysis_report_YYYYMMDD_HHMMSS.json
â””â”€â”€ visualizations/               # å¯è§†åŒ–å›¾è¡¨
    â”œâ”€â”€ cleaning_analysis_main_YYYYMMDD_HHMMSS.png
    â”œâ”€â”€ sentiment_analysis_visualization_YYYYMMDD_HHMMSS.png
    â”œâ”€â”€ time_analysis_main_YYYYMMDD_HHMMSS.png
    â””â”€â”€ like_analysis_main_YYYYMMDD_HHMMSS.png
```

### æ–‡ä»¶å‘½åè§„åˆ™

- **æ—¶é—´æˆ³æ ¼å¼**ï¼š`YYYYMMDD_HHMMSS`
- **æ¨¡å—æ ‡è¯†**ï¼š`cleaning`ã€`sentiment`ã€`time`ã€`like`
- **æ–‡ä»¶ç±»å‹**ï¼š`.csv`ï¼ˆæ•°æ®ï¼‰ã€`.json`ï¼ˆç»“æ„åŒ–æ•°æ®ï¼‰ã€`.png`ï¼ˆå›¾è¡¨ï¼‰

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•é€‰æ‹©åˆé€‚çš„åˆ†æå™¨ç±»å‹ï¼Ÿ

**A**: 
- **æµ‹è¯•é˜¶æ®µ**ï¼šä½¿ç”¨`--type local`ï¼Œæ— éœ€ç½‘ç»œï¼Œé€Ÿåº¦å¿«
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨`--type aliyun`ï¼Œå‡†ç¡®åº¦é«˜ï¼Œä½†éœ€è¦é…ç½®APIå¯†é’¥

### Q2: ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨`--use-cleaned-data`ï¼Ÿ

**A**: 
- æ¸…æ´—åçš„æ•°æ®è´¨é‡æ›´é«˜ï¼Œåˆ†æç»“æœæ›´å‡†ç¡®
- é¿å…é‡å¤æ¸…æ´—ï¼Œæé«˜åˆ†ææ•ˆç‡
- ç¡®ä¿æ•°æ®ä¸€è‡´æ€§

### Q3: å¦‚ä½•å¤„ç†å¤§é‡æ•°æ®ï¼Ÿ

**A**: 
- ä½¿ç”¨`--limit`å‚æ•°é™åˆ¶å¤„ç†æ•°é‡
- å…ˆç”¨`--test`æ¨¡å¼æµ‹è¯•å°æ‰¹é‡æ•°æ®
- åˆ†æ‰¹å¤„ç†ï¼Œé¿å…å†…å­˜æº¢å‡º

### Q4: å¦‚ä½•è‡ªå®šä¹‰æ¸…æ´—æ•°æ®è·¯å¾„ï¼Ÿ

**A**: 
```bash
python text_analysis_unified.py sentiment --use-cleaned-data --cleaned-data-path /path/to/your/cleaned_data.json
```

### Q5: å¦‚ä½•è·³è¿‡æŸäº›è¾“å‡ºï¼Ÿ

**A**: 
```bash
# åªåˆ†æï¼Œä¸ä¿å­˜æ–‡ä»¶
python text_analysis_unified.py sentiment --use-cleaned-data --no-save --no-report --no-viz

# åªç”ŸæˆæŠ¥å‘Šï¼Œä¸åˆ›å»ºå›¾è¡¨
python text_analysis_unified.py sentiment --use-cleaned-data --no-viz
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. æ‰¹é‡å¤„ç†å¤šä¸ªè§†é¢‘

```bash
# åˆ›å»ºæ‰¹å¤„ç†è„šæœ¬
for video_id in 123456 789012 345678; do
    echo "å¤„ç†è§†é¢‘: $video_id"
    python text_analysis_unified.py cleaning --video-id $video_id
    python text_analysis_unified.py sentiment --use-cleaned-data --type local --video-id $video_id
done
```

### 2. è‡ªå®šä¹‰åˆ†æå‚æ•°

```bash
# æƒ…æ„Ÿåˆ†æï¼šé™åˆ¶æ•°é‡ï¼Œä½¿ç”¨æœ¬åœ°è¯å…¸
python text_analysis_unified.py sentiment --use-cleaned-data --type local --limit 500 --video-id 123456

# æ—¶é—´åˆ†æï¼šæŒ‡å®šæ¸…æ´—æ•°æ®è·¯å¾„
python text_analysis_unified.py time --use-cleaned-data --cleaned-data-path data/processed/my_cleaned_data.json
```

### 3. ç»“æœæ–‡ä»¶ç®¡ç†

```bash
# æŸ¥çœ‹æœ€æ–°çš„åˆ†æç»“æœ
ls -la data/results/ | tail -5

# æŸ¥çœ‹ç‰¹å®šæ¨¡å—çš„ç»“æœ
ls -la data/results/ | grep sentiment

# æ¸…ç†æ—§çš„åˆ†æç»“æœ
find data/results/ -name "*.csv" -mtime +7 -delete
```

### 4. ç¯å¢ƒå˜é‡é…ç½®

```bash
# è®¾ç½®é»˜è®¤å‚æ•°
export DEFAULT_VIDEO_ID=123456
export DEFAULT_ANALYZER_TYPE=local

# åœ¨è„šæœ¬ä¸­ä½¿ç”¨
python text_analysis_unified.py sentiment --use-cleaned-data --type $DEFAULT_ANALYZER_TYPE --video-id $DEFAULT_VIDEO_ID
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
2. æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤ç¯å¢ƒé…ç½®æ˜¯å¦æ­£ç¡®
4. æŸ¥çœ‹å„æ¨¡å—çš„è¯¦ç»†ç®—æ³•æ–‡æ¡£

---

**æœ€åæ›´æ–°**ï¼š2025-08-07  
**ç‰ˆæœ¬**ï¼šv2.0  
**ä½œè€…**ï¼šCodyXie
